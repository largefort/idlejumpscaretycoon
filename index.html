<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <!-- Viewport meta tag for responsive design on mobile devices -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Idle Jumpscare Tycoon - Compact</title>
  <style>
    /* Compact UI design for mobile */
    body {
      background-color: #111;
      color: #eee;
      margin: 0;
      padding: 0;
      font-family: 'Courier New', Courier, monospace;
    }
    /* Fixed header for counters */
    #header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background-color: #222;
      color: #fff;
      padding: 5px;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.5);
      z-index: 1000;
    }
    #header h1 {
      font-size: 1.4em;
      margin: 0;
    }
    #counters {
      margin-top: 3px;
      display: flex;
      justify-content: space-around;
    }
    #counters div {
      font-size: 0.9em;
    }
    /* Main content container below header */
    #content {
      margin-top: 60px; /* space for fixed header */
      padding: 5px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #jumpscareButton, #resetButton {
      background-color: #900;
      color: #fff;
      border: none;
      padding: 8px 12px;
      font-size: 1em;
      cursor: pointer;
      border-radius: 3px;
      width: 90%;
      max-width: 400px;
      margin: 5px auto;
    }
    /* Make reset button stand out with a different color */
    #resetButton {
      background-color: #c00;
    }
    #buildings {
      width: 100%;
      max-width: 400px;
      margin: 5px auto;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .building {
      border: 1px solid #555;
      padding: 5px;
      background-color: #222;
      border-radius: 3px;
    }
    .building h3 {
      margin: 3px 0;
      font-size: 1.2em;
    }
    .building p {
      margin: 2px 0;
      font-size: 0.9em;
    }
    .buy {
      background-color: #444;
      color: #fff;
      border: none;
      padding: 5px 10px;
      font-size: 0.9em;
      cursor: pointer;
      border-radius: 3px;
      width: 100%;
      margin-top: 3px;
    }
    .buy:hover {
      background-color: #666;
    }
  </style>
</head>
<body>
  <!-- Fixed header with counters -->
  <div id="header">
    <h1 id="gameTitle">Idle Jumpscare Tycoon</h1>
    <div id="counters">
      <div id="soulsCounter">Souls: 10</div>
      <div id="spsCounter">SPS: 0</div>
    </div>
  </div>
  <div id="content">
    <button id="jumpscareButton">Trigger Jumpscare</button>
    <!-- New Reset Progress button -->
    <button id="resetButton">Reset Progress</button>
    <div id="buildings">
      <!-- Existing Buildings -->
      <div class="building" data-id="hauntedHouse">
        <h3>Haunted House</h3>
        <p class="costLine">Cost: <span class="cost">10</span> Souls</p>
        <p class="ownedLine">Owned: <span class="owned">0</span></p>
        <p class="productionLine">Production: <span class="production">1</span> Soul/s</p>
        <button class="buy">Buy</button>
      </div>
      <div class="building" data-id="cursedMansion">
        <h3>Cursed Mansion</h3>
        <p class="costLine">Cost: <span class="cost">100</span> Souls</p>
        <p class="ownedLine">Owned: <span class="owned">0</span></p>
        <p class="productionLine">Production: <span class="production">10</span> Soul/s</p>
        <button class="buy">Buy</button>
      </div>
      <div class="building" data-id="graveyard">
        <h3>Graveyard</h3>
        <p class="costLine">Cost: <span class="cost">1000</span> Souls</p>
        <p class="ownedLine">Owned: <span class="owned">0</span></p>
        <p class="productionLine">Production: <span class="production">50</span> Soul/s</p>
        <button class="buy">Buy</button>
      </div>
      <div class="building" data-id="abandonedAsylum">
        <h3>Abandoned Asylum</h3>
        <p class="costLine">Cost: <span class="cost">5000</span> Souls</p>
        <p class="ownedLine">Owned: <span class="owned">0</span></p>
        <p class="productionLine">Production: <span class="production">200</span> Soul/s</p>
        <button class="buy">Buy</button>
      </div>
      <div class="building" data-id="demonicTower">
        <h3>Demonic Tower</h3>
        <p class="costLine">Cost: <span class="cost">20000</span> Souls</p>
        <p class="ownedLine">Owned: <span class="owned">0</span></p>
        <p class="productionLine">Production: <span class="production">1000</span> Soul/s</p>
        <button class="buy">Buy</button>
      </div>
      <!-- 5 New Buildings -->
      <div class="building" data-id="sinisterCrypt">
        <h3>Sinister Crypt</h3>
        <p class="costLine">Cost: <span class="cost">50000</span> Souls</p>
        <p class="ownedLine">Owned: <span class="owned">0</span></p>
        <p class="productionLine">Production: <span class="production">2500</span> Soul/s</p>
        <button class="buy">Buy</button>
      </div>
      <div class="building" data-id="phantomOpera">
        <h3>Phantom Opera</h3>
        <p class="costLine">Cost: <span class="cost">100000</span> Souls</p>
        <p class="ownedLine">Owned: <span class="owned">0</span></p>
        <p class="productionLine">Production: <span class="production">5000</span> Soul/s</p>
        <button class="buy">Buy</button>
      </div>
      <div class="building" data-id="witchHut">
        <h3>Witch's Hut</h3>
        <p class="costLine">Cost: <span class="cost">250000</span> Souls</p>
        <p class="ownedLine">Owned: <span class="owned">0</span></p>
        <p class="productionLine">Production: <span class="production">10000</span> Soul/s</p>
        <button class="buy">Buy</button>
      </div>
      <div class="building" data-id="spectralLabyrinth">
        <h3>Spectral Labyrinth</h3>
        <p class="costLine">Cost: <span class="cost">500000</span> Souls</p>
        <p class="ownedLine">Owned: <span class="owned">0</span></p>
        <p class="productionLine">Production: <span class="production">25000</span> Soul/s</p>
        <button class="buy">Buy</button>
      </div>
      <div class="building" data-id="doomedCathedral">
        <h3>Doomed Cathedral</h3>
        <p class="costLine">Cost: <span class="cost">1000000</span> Souls</p>
        <p class="ownedLine">Owned: <span class="owned">0</span></p>
        <p class="productionLine">Production: <span class="production">50000</span> Soul/s</p>
        <button class="buy">Buy</button>
      </div>
    </div>
  </div>

  <script>
    /*************** Translation System ***************/
    const translationData = {
      en: {
        title: "Idle Jumpscare Tycoon",
        souls: "Souls",
        sps: "SPS",
        triggerJumpscare: "Trigger Jumpscare",
        hauntedHouse: "Haunted House",
        cursedMansion: "Cursed Mansion",
        graveyard: "Graveyard",
        abandonedAsylum: "Abandoned Asylum",
        demonicTower: "Demonic Tower",
        sinisterCrypt: "Sinister Crypt",
        phantomOpera: "Phantom Opera",
        witchHut: "Witch's Hut",
        spectralLabyrinth: "Spectral Labyrinth",
        doomedCathedral: "Doomed Cathedral",
        cost: "Cost",
        owned: "Owned",
        production: "Production",
        soulPerSec: "Soul/s",
        notEnoughSouls: "Not enough souls to buy",
        jumpscareSuccess: "Jumpscare successful! Humans trembled with fear—collecting",
        jumpscareSouls: "souls!",
        needBuilding: "You need to own at least one building to scare humans!",
        buy: "Buy"
      },
      es: {
        title: "Idle Jumpscare Tycoon",
        souls: "Almas",
        sps: "APS",
        triggerJumpscare: "Activar Sustazo",
        hauntedHouse: "Casa Embrujada",
        cursedMansion: "Mansión Maldita",
        graveyard: "Cementerio",
        abandonedAsylum: "Manicomio Abandonado",
        demonicTower: "Torre Demoníaca",
        sinisterCrypt: "Cripta Siniestra",
        phantomOpera: "Ópera Fantasma",
        witchHut: "Cabaña de la Bruja",
        spectralLabyrinth: "Laberinto Espectral",
        doomedCathedral: "Catedral Condenada",
        cost: "Costo",
        owned: "Poseídas",
        production: "Producción",
        soulPerSec: "Alma/s",
        notEnoughSouls: "¡No tienes suficientes almas para comprar",
        jumpscareSuccess: "¡Susto exitoso! Los humanos temblaron de miedo, ¡has recolectado",
        jumpscareSouls: "almas!",
        needBuilding: "¡Necesitas poseer al menos un edificio para asustar a los humanos!",
        buy: "Comprar"
      }
    };

    const userLang = navigator.language.substring(0, 2);
    const texts = translationData[userLang] ? translationData[userLang] : translationData['en'];

    /*************** Game State & Functions ***************/
    let souls = 10;
    const buildings = {
      hauntedHouse: { name: "Haunted House", cost: 10, production: 1, owned: 0, costMultiplier: 1.15 },
      cursedMansion: { name: "Cursed Mansion", cost: 100, production: 10, owned: 0, costMultiplier: 1.15 },
      graveyard: { name: "Graveyard", cost: 1000, production: 50, owned: 0, costMultiplier: 1.15 },
      abandonedAsylum: { name: "Abandoned Asylum", cost: 5000, production: 200, owned: 0, costMultiplier: 1.15 },
      demonicTower: { name: "Demonic Tower", cost: 20000, production: 1000, owned: 0, costMultiplier: 1.15 },
      sinisterCrypt: { name: "Sinister Crypt", cost: 50000, production: 2500, owned: 0, costMultiplier: 1.15 },
      phantomOpera: { name: "Phantom Opera", cost: 100000, production: 5000, owned: 0, costMultiplier: 1.15 },
      witchHut: { name: "Witch's Hut", cost: 250000, production: 10000, owned: 0, costMultiplier: 1.15 },
      spectralLabyrinth: { name: "Spectral Labyrinth", cost: 500000, production: 25000, owned: 0, costMultiplier: 1.15 },
      doomedCathedral: { name: "Doomed Cathedral", cost: 1000000, production: 50000, owned: 0, costMultiplier: 1.15 }
    };

    function saveGame() {
      const saveData = { souls: souls, buildings: buildings };
      localStorage.setItem('idleJumpscareTycoonSave', JSON.stringify(saveData));
    }

    function loadGame() {
      const saveData = localStorage.getItem('idleJumpscareTycoonSave');
      if (saveData) {
        const data = JSON.parse(saveData);
        souls = data.souls || 10;
        for (let key in data.buildings) {
          if (buildings.hasOwnProperty(key)) {
            buildings[key].cost = data.buildings[key].cost;
            buildings[key].production = data.buildings[key].production;
            buildings[key].owned = data.buildings[key].owned;
            buildings[key].costMultiplier = data.buildings[key].costMultiplier;
          }
        }
      }
    }

    function applyTranslations() {
      document.getElementById("gameTitle").innerText = texts.title;
      document.getElementById("jumpscareButton").innerText = texts.triggerJumpscare;
      document.querySelectorAll(".building").forEach(function(buildingElem) {
        const id = buildingElem.getAttribute("data-id");
        const building = buildings[id];
        if (texts[id]) {
          buildingElem.querySelector("h3").innerText = texts[id];
        } else {
          buildingElem.querySelector("h3").innerText = building.name;
        }
        const costLine = buildingElem.querySelector(".costLine");
        const ownedLine = buildingElem.querySelector(".ownedLine");
        const productionLine = buildingElem.querySelector(".productionLine");
        costLine.innerHTML = texts.cost + ": <span class='cost'>" + Math.floor(building.cost) + "</span> " + texts.souls;
        ownedLine.innerHTML = texts.owned + ": <span class='owned'>" + building.owned + "</span>";
        productionLine.innerHTML = texts.production + ": <span class='production'>" + building.production + "</span> " + texts.soulPerSec;
        buildingElem.querySelector(".buy").innerText = texts.buy;
      });
    }

    function updateDisplay() {
      document.getElementById("soulsCounter").innerText = texts.souls + ": " + Math.floor(souls);
      let totalSPS = 0;
      for (let key in buildings) {
        totalSPS += buildings[key].owned * buildings[key].production;
      }
      document.getElementById("spsCounter").innerText = texts.sps + ": " + totalSPS;
      for (let key in buildings) {
        const buildingElem = document.querySelector(`.building[data-id="${key}"]`);
        if (buildingElem) {
          buildingElem.querySelector(".cost").innerText = Math.floor(buildings[key].cost);
          buildingElem.querySelector(".owned").innerText = buildings[key].owned;
        }
      }
    }

    function purchaseBuilding(id) {
      const building = buildings[id];
      if (souls >= building.cost) {
        souls -= building.cost;
        building.owned += 1;
        building.cost *= building.costMultiplier;
        updateDisplay();
      } else {
        alert(texts.notEnoughSouls + " " + (texts[id] ? texts[id] : building.name) + "!");
      }
    }

    document.querySelectorAll(".buy").forEach(button => {
      button.addEventListener("click", function() {
        const buildingId = this.parentElement.getAttribute("data-id");
        purchaseBuilding(buildingId);
      });
    });

    function productionTick() {
      let totalProduction = 0;
      for (let key in buildings) {
        totalProduction += buildings[key].owned * buildings[key].production;
      }
      souls += totalProduction;
      updateDisplay();
    }

    function triggerJumpscare() {
      let totalBuildings = 0;
      for (let key in buildings) {
        totalBuildings += buildings[key].owned;
      }
      if (totalBuildings === 0) {
        alert(texts.needBuilding);
        return;
      }
      const bonusMultiplier = Math.floor(Math.random() * 100) + 50;
      const bonus = bonusMultiplier * totalBuildings;
      souls += bonus;
      alert(texts.jumpscareSuccess + " " + bonus + " " + texts.jumpscareSouls);
      updateDisplay();
    }

    document.getElementById("jumpscareButton").addEventListener("click", triggerJumpscare);

    // Erase progress feature: Reset game state and clear localStorage
    document.getElementById("resetButton").addEventListener("click", function() {
      if (confirm("Are you sure you want to erase your progress? This cannot be undone.")) {
        localStorage.removeItem('idleJumpscareTycoonSave');
        location.reload();
      }
    });

    loadGame();
    applyTranslations();
    updateDisplay();

    setInterval(productionTick, 1000);
    setInterval(saveGame, 5000);
  </script>
</body>
</html>
